{% extends 'base.html' %}
{% load static %}
{% load navbar %}
{% load i18n %}

{% get_available_languages as LANGUAGES %}
{% get_current_language as LANGUAGE_CODE %}
{% get_language_info_list for LANGUAGES as languages %}


{% block metatags %}
    {% if LANGUAGE_CODE == "ar" %}
        <title>{{category.nameAr}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionAr}}">
        <meta name="keywords" content="{{category.keywordsAr}}">
    {% elif LANGUAGE_CODE == "es" %}
        <title>{{category.nameEs}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionEs}}">
        <meta name="keywords" content="{{category.keywordsEs}}">
    {% elif LANGUAGE_CODE == "fr" %}
        <title>{{category.nameFr}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionFr}}">
        <meta name="keywords" content="{{category.keywordsFr}}">
    {% elif LANGUAGE_CODE == "tr" %}
        <title>{{category.nameTr}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionTr}}">
        <meta name="keywords" content="{{category.keywordsTr}}">
    {% elif LANGUAGE_CODE == "hi" %}
        <title>{{category.nameHi}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionHi}}">
        <meta name="keywords" content="{{category.keywordsHi}}">
    {% elif LANGUAGE_CODE == "vi" %}
        <title>{{category.nameVi}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionVi}}">
        <meta name="keywords" content="{{category.keywordsVi}}">
    {% elif LANGUAGE_CODE == "fa" %}
        <title>{{category.nameFa}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionFa}}">
        <meta name="keywords" content="{{category.keywordsFa}}">
    {% elif LANGUAGE_CODE == "ur" %}
        <title>{{category.nameUr}} | Migrate Wisely</title>
        <meta name="description" content="{{category.descriptionUr}}">
        <meta name="keywords" content="{{category.keywordsUr}}">
    {% else %}
        <title>{{category.name}} | Migrate Wisely</title>
        <meta name="description" content="{{category.description}}">
        <meta name="keywords" content="{{category.keywords}}">
    {% endif %}
{% endblock metatags %}



{% block content %}

<body>

    <!-- start page-wrapper -->
    <div class="page-wrapper">

        <!-- start preloader -->
        <div class="preloader">
            <div class="sk-folding-cube">
                <div class="sk-cube1 sk-cube"></div>
                <div class="sk-cube2 sk-cube"></div>
                <div class="sk-cube4 sk-cube"></div>
                <div class="sk-cube3 sk-cube"></div>
            </div>
        </div>
        <!-- end preloader -->

        {% InnerNavbarTag %}

        <style>
            .page-title-revised{
            background: url({% static 'assets/images/blogdetail.jpg' %}) center center/cover no-repeat local;
            }
        </style>

        <!-- start page-title -->
        <section class="page-title page-title-revised" style="height:130px;background:#F27843;">
            <div class="container">
                <div class="row">
                    <div class="col col-xs-12">
                        {% if LANGUAGE_CODE == "ar" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameAr}}</h2>
                        {% elif LANGUAGE_CODE == "es" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameEs}}</h2>
                        {% elif LANGUAGE_CODE == "fa" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameFa}}</h2>
                        {% elif LANGUAGE_CODE == "fr" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameFr}}</h2>
                        {% elif LANGUAGE_CODE == "tr" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameTr}}</h2>
                        {% elif LANGUAGE_CODE == "hi" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameHi}}</h2>
                        {% elif LANGUAGE_CODE == "vi" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameVi}}</h2>
                        {% elif LANGUAGE_CODE == "ur" %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.nameUr}}</h2>
                        {% else %}
                        <h2 style="font-weight:500;font-size:2rem;">{{category.name}}</h2>
                        {% endif %}
                        <ol class="breadcrumb mobil-baslik-display-none">
                            <li class="hvr-underline-from-right"><a style="color:white;" href="/">{% trans "Homepage" %}</a></li>
                            <li>{% trans "Categories" %}</li>
                            {% if LANGUAGE_CODE == "ar" %}
                            <li>{{category.nameAr}}</li>
                            {% elif LANGUAGE_CODE == "es" %}
                            <li>{{category.nameEs}}</li>
                            {% elif LANGUAGE_CODE == "fa" %}
                            <li>{{category.nameFa}}</li>
                            {% elif LANGUAGE_CODE == "fr" %}
                            <li>{{category.nameFr}}</li>
                            {% elif LANGUAGE_CODE == "tr" %}
                            <li>{{category.nameTr}}</li>
                            {% elif LANGUAGE_CODE == "hi" %}
                            <li>{{category.nameHi}}</li>
                            {% elif LANGUAGE_CODE == "vi" %}
                            <li>{{category.nameVi}}</li>
                            {% elif LANGUAGE_CODE == "ur" %}
                            <li>{{category.nameUr}}</li>
                            {% else %}
                            <li>{{category.name}}</li>
                            {% endif %}
                        </ol>
                    </div>
                </div> <!-- end row -->
            </div> <!-- end container -->
        </section>        
        <!-- end page-title -->

        <style>
            .blog-single-section .entry-meta > li + li:before{background:#97daf7;}

            .displayNoneSecondMessage{display:none;}
            
        </style>
        

        <!-- start blog-single-section -->
        <section class="blog-single-section section-padding">
            <div class="container">
                <div class="row">
                    <div class="col col-md-9">
                        <div class="blog-content">
                            <div class="post format-standard-image" style="margin-bottom:10%;padding:15px;">
                                {% if LANGUAGE_CODE == "ar" %}
                                {{category.explAr|safe}}
                                {% elif LANGUAGE_CODE == "es" %}
                                {{category.explEs|safe}}
                                {% elif LANGUAGE_CODE == "fa" %}
                                {{category.explFa|safe}}
                                {% elif LANGUAGE_CODE == "fr" %}
                                {{category.explFr|safe}}
                                {% elif LANGUAGE_CODE == "tr" %}
                                {{category.explTr|safe}}
                                {% elif LANGUAGE_CODE == "hi" %}
                                {{category.explHi|safe}}
                                {% elif LANGUAGE_CODE == "vi" %}
                                {{category.explVi|safe}}
                                {% elif LANGUAGE_CODE == "ur" %}
                                {{category.explUr|safe}}
                                {% else %}
                                {{category.expl|safe}}
                                {% endif %}
                            </div>
                            {% for post in posts %}
                            <div class="col-md-6 col-lg-6 col-sm-12" style="min-height:420px;">
                                <a href="/post/{{post.url_name}}" style="margin-bottom: 2%;">
                                    <div class="img-holder">
                                        <img src="/media/{{post.detail_image}}" alt>
                                    </div>
                                    <img src="/media/{{post.country.flag}}" style="float: right;margin: 3% 0 3% 4%;" width="45">
                                    {% if LANGUAGE_CODE == "ar" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerAr}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explAr|truncatewords:17}}</p>
                                    {% elif LANGUAGE_CODE == "es" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerEs}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explEs|truncatewords:17}}</p>
                                    {% elif LANGUAGE_CODE == "fa" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerFa}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explFa|truncatewords:17}}</p>
                                    {% elif LANGUAGE_CODE == "fr" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerFr}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explFr|truncatewords:17}}</p>
                                    {% elif LANGUAGE_CODE == "tr" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerTr}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explTr|truncatewords:17}}</p>
                                    {% elif LANGUAGE_CODE == "hi" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerHi}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explHi|truncatewords:17}}</p>
                                    {% elif LANGUAGE_CODE == "vi" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerVi}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explVi|truncatewords:17}}</p>
                                    {% elif LANGUAGE_CODE == "ur" %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.headerUr}}</h3>
                                    <p style="font-size:1rem;">{{post.short_explUr|truncatewords:17}}</p>
                                    {% else %}
                                    <h3 style="margin: 0.5em 0 0.5em;">{{post.header}}</h3>
                                    <p style="font-size:1rem;">{{post.short_expl|truncatewords:17}}</p>
                                    {% endif %}
                                <a/>
                                <div class="tag">
                                    <ul style="list-style-type: none;">
                                        {% if LANGUAGE_CODE == "ar" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">{{tag.nameAr}}#</a> &nbsp;{% endfor %}</li>
                                        {% elif LANGUAGE_CODE == "es" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">#{{tag.nameEs}}</a> &nbsp;{% endfor %}</li>
                                        {% elif LANGUAGE_CODE == "fa" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">{{tag.nameFa}}#</a> &nbsp;{% endfor %}</li>
                                        {% elif LANGUAGE_CODE == "fr" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">#{{tag.nameFr}}</a> &nbsp;{% endfor %}</li>
                                        {% elif LANGUAGE_CODE == "tr" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">#{{tag.nameTr}}</a> &nbsp;{% endfor %}</li>
                                        {% elif LANGUAGE_CODE == "hi" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">#{{tag.nameHi}}</a> &nbsp;{% endfor %}</li>
                                        {% elif LANGUAGE_CODE == "vi" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">#{{tag.nameVi}}</a> &nbsp;{% endfor %}</li>
                                        {% elif LANGUAGE_CODE == "ur" %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">{{tag.nameUr}}#</a> &nbsp;{% endfor %}</li>
                                        {% else %}
                                        <li>{% for tag in post.tag.all %}<a class="hvr-underline-from-left" href="/tag/{{tag.url_name}}">#{{tag.name}}</a> &nbsp;{% endfor %}</li>
                                        {% endif %}
                                    </ul>
                                </div>
                            </div>
                            {% endfor %}
                            <div class="col col-md-12">
                            <h2 class="comment-reply-title" style="font-weight:300;font-size:33px;margin-top:50px;border-bottom: 1px solid #2b2e3a;">{% trans "Comments" %}</h2>
                                <div class="blog-content">
                                    <div class="comments-area" style="margin-top:40px;">
                                        <div class="comments-section">
                                            {% if relatedComments %}
                                            <ol class="comments" style="box-shadow: rgb(0 0 0 / 2%) 0px 1px 3px 0px, rgb(27 31 35 / 15%) 0px 0px 0px 1px;">
                                                {% for comment in relatedComments %}
                                                <li class="comment even thread-even depth-1" id="comment-1">
                                                    <div id="comment{{comment.id}}" style="border-bottom: none; {% if forloop.first %}{% else %}border-top:1px solid #1b1f2326;{% endif %}">
                                                        <div class="comment-main-area">
                                                            <div class="comment-wrapper">
                                                                <div class="comments-meta">
                                                                    <h4 style="color: #7e8690;font-weight:300;font-size: 1rem;"><a class="hvr-underline-from-left" href="{% url 'app:profile' comment.profile.encrypted_id.ekey %}">@{{comment.profile.user}}</a> | <span class="comments-date">{{comment.date_created}}</span></h4>
                                                                </div>
                                                                <div class="comment-area">
                                                                    <p style="font-size: 1.1rem;color:#666;font-weight: 300;line-height: 1.3em;">{{comment.message}}</p>
                                                                    <div class="comments-reply">
                                                                        {% if 'member' == request.user.groups.all.first.name %}
                                                                        <a class="comment-reply-link hvr-underline-from-right" type="button" onclick="ableReplyArea({{comment.id}})" href="#comment{{comment.id}}" style="cursor:pointer;background: #F27843;"><span>{% trans "Reply" %}</span></a>
                                                                        {% else %}
                                                                        <a class="comment-reply-link" type="button" href="{% url 'app:registerUser' %}" style="cursor:pointer;background-color: #F27843;"><span>{% trans "Submit" %}</span></a>
                                                                        {% endif %}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <ul class="children displayNoneSecondMessage" id="{{comment.id}}" style="background:#f278432e;">
                                                        <li class="comment">
                                                            <div style="border-bottom:none;border-top: 1px solid #f1f1f1;">
                                                                <div class="comment-main-area">
                                                                    <div class="comment-wrapper">
                                                                        <div class="comment-area">
                                                                            <form method="POST" id="secondcommentform" class="comment-form">
                                                                                {% csrf_token %}
                                                                                <input type="text" name="specificCommentId" value="{{comment.id}}" style="display:none;">
                                                                                <h5 id="alert" style="margin-top: 0;font-size:17px;color: #666;font-family: 'Source Sans Pro', sans-serif;display: none;">{% trans "Maximum Characters Reached" %}</h5>
                                                                                <div class="form-textarea">
                                                                                    <textarea id="commentSecond" name="message" placeholder="{% trans 'Write Your Comments' %}..." maxlength="250" style="border: none;width: 100%;outline: none;background:#fffff000;min-height: 160px;" autocomplete="off" onkeypress="count()" autofocus required></textarea>
                                                                                </div>
                                                                                <div class="comments-reply">
                                                                                    {% comment %} <a class="comment-reply-link" onclick="document.getElementById('secondcommentform').submit()" style="cursor:pointer;"><span>Submit</span></a> {% endcomment %}
                                                                                    <div class="form-submit" style="display: inline-flex;justify-content: space-between;width: 100%;align-items: center;">
                                                                                        <input id="submit" value="{% trans "Submit" %}" type="submit" name="categoryPageSecondComment" style="border: none;background-color:#F27843;color: white;font-size: 0.875rem;font-weight: 300;padding: 4px 14px;">
                                                                                        <h4 style="font-size:16px;color: #666;font-family: 'Source Sans Pro', sans-serif;"><span id="counter">0</span> /250 {% trans "Characters" %}</h4>
                                                                                    </div>
                                                                                </div>
                                                                            </form>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                    {% for secondComment in secondComments %}
                                                        {% if secondComment.comment == comment %}
                                                        <ul class="children">
                                                            <li class="comment">
                                                                <div style="border-top: 1px solid #f1f1f1;border-bottom: none;">
                                                                    <div class="comment-main-area">
                                                                        <div class="comment-wrapper">
                                                                            <div class="comments-meta">
                                                                                <h4 style="display: inline-flex;align-items: flex-end;color: #7e8690;font-weight:300;font-size: 1rem;"><i class="ti-back-right" style="transform: rotateY(180deg);"></i>&nbsp;&nbsp; <a class="hvr-underline-from-left" href="{% url 'app:profile' secondComment.profile.encrypted_id.ekey %}">@{{secondComment.profile.user}}</a> &nbsp;|&nbsp; <span class="comments-date">{{secondComment.date_created}}</span></h4>
                                                                            </div>
                                                                            <div class="comment-area">
                                                                                <p style="line-break: anywhere;font-size: 1.1rem;color: #666;font-weight: 300;line-height: 1.3em;">{{secondComment.message}}</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                        {% endif %}
                                                    {% endfor %}
                                                </li>
                                                {% endfor %}
                                            </ol>
                                            {% else %}
                                            <h2 class="comment-reply-title" style="margin-bottom:0.8em;font-size: 1.375rem;font-weight: 300;">{% trans "No Comments So Far" %}</h2>    
                                            {% endif %}
                                        </div>
                                    </div> <!-- end comments-area -->
                                    <div class="comments-area" style="margin-top:10%;">
                                        <div class="comment-respond" style="margin-top:0;">
                                            <h2 class="comment-reply-title" style="margin-bottom:0.8em;font-weight:300;">{% trans "Share Your Comment" %}</h2>
                                            {% if 'member' == request.user.groups.all.first.name %}
                                            <form method="POST" id="commentform" class="comment-form">
                                                {% csrf_token %}
                                                <div class="form-inputs">
                                                    <p>{% trans "About" %}: {% if LANGUAGE_CODE == "ar" %}{{category.nameAr}}
                                                                            {% elif LANGUAGE_CODE == "es" %}{{category.nameEs}}
                                                                            {% elif LANGUAGE_CODE == "fr" %}{{category.nameFr}}
                                                                            {% elif LANGUAGE_CODE == "tr" %}{{category.nameTr}}
                                                                            {% elif LANGUAGE_CODE == "fa" %}{{category.nameFa}}
                                                                            {% elif LANGUAGE_CODE == "vi" %}{{category.nameVi}}
                                                                            {% elif LANGUAGE_CODE == "hi" %}{{category.nameHi}}
                                                                            {% elif LANGUAGE_CODE == "ur" %}{{category.nameUr}}
                                                                            {% else %}{{category.name}}{% endif %}</p>
                                                </div>
                                                <div class="form-textarea">
                                                    <textarea id="comment" name="message" placeholder="{% trans 'Write Your Comments' %}..." autocomplete="off" required></textarea>
                                                </div>
                                                <div class="form-submit">
                                                    <input id="submit" value="{% trans "Submit" %}" type="submit" name="categoryPageComment">
                                                </div>
                                            </form>
                                            {% else %}
                                            <a class="comment-reply-link hvr-underline-from-right" type="button" href="{% url 'app:registerUser' %}" style="cursor:pointer;font-size: 1.1rem;padding: 15px 30px;background:#F27843;"><span>Log In To Comment</span></a>
                                            {% endif %}
                                        </div>
                                    </div> <!-- end comments-area -->
                                </div>
                            </div>
                        </div>
                    </div>
                    {% RightSideTag %}
                </div>
            </div> <!-- end container -->
        </section>
        <!-- end blog-single-section -->
        {% FooterTag %}

    </div>
    <!-- end of page-wrapper -->
</body>

<script>
    function ableReplyArea(id) {
        var element = document.getElementById(id);
        element.classList.remove("displayNoneSecondMessage");
        }

    function count() {
        var text = document.getElementById("commentSecond");
        var counter = document.getElementById("counter");
        var alert = document.getElementById("alert");
        counter.innerText = text.value.length;

        if (text.value.length >= 250) {
            alert.style.display = "block";
        } else {
            text.style.color = "#666";
            alert.style.display = "none";
        }
    }
</script>

{% endblock content %}